---
title: APP签名机制
categories: 
  - 技术
  - iOS基础知识
tags: 
  - null
date: 2023-08-11 22:46:06
permalink: /pages/1c00b6/
---
## 预备知识：数字签名 & 数字证书

[数字签名和数字证书是什么？——阮一峰](https://www.ruanyifeng.com/blog/2011/08/what_is_a_digital_signature.html)

## 数字签名

数字签名一般夹带在要传输的数据中，用来防止数据被篡改。

它的底层核心是哈希混淆算法和非对称加密技术（公/私钥）。

### 如何生成

签名Signature的生成由通信中的发送方Sender进行，首先对要传输的数据Data进行哈希Hash混淆得到数据摘要Digest，然后用私钥Private Key对摘要进行加密，这样就生成了数据的签名。

![Screenshot-2023-08-20-at-22](https://cdn.staticaly.com/gh/214070779/picx-images-hosting@master/20230813/Screenshot-2023-08-20-at-22.30.20.10hx4r9l01o0.webp)


### 如何验证
接收方Receiver接收来自发送方的数据和签名，对它们分别做如下处理：

数据：使用与发送方相同的哈希算法对数据进行混淆，得到数据摘要A；
签名：利用发送方加密所用私钥对应的公钥Public Key，对签名进行解密，得到数据摘要B。

比对摘要A和摘要B，如果相等，则说明数据没有被篡改，否则数据存在问题。
![Screenshot-2023-08-20-at-22](https://cdn.staticaly.com/gh/214070779/picx-images-hosting@master/20230813/Screenshot-2023-08-20-at-22.41.44.1ef77ye85s8w.webp)

签名的生成和验证过程合在一起如下图所示，自己再分析一遍可加深理解。

![Screenshot-2023-08-20-at-22](https://cdn.staticaly.com/gh/214070779/picx-images-hosting@master/20230813/Screenshot-2023-08-20-at-22.42.21.5d8p1csib780.webp)

带着问题往下走：
Q1: 猜想一下iOS签名和验签的过程，App开发者和App使用者中，谁是发送方，谁是接收方，传输的数据又是什么呢？

A1: App开发者是发送方，App使用者是接收方，传输的数据就是App的安装包。
Q2: 接收方如何拿到解密所用的公钥呢？

