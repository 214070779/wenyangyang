{"remainingRequest":"/Users/yangyangwen/Desktop/wenyangyang/node_modules/vue-loader/lib/index.js??ref--1-1!/Users/yangyangwen/Desktop/wenyangyang/node_modules/vuepress/lib/webpack/markdownLoader.js??ref--1-2!/Users/yangyangwen/Desktop/wenyangyang/docs/iOS-Summary/Animation.md?vue&type=template&id=7f03eb58&","dependencies":[{"path":"/Users/yangyangwen/Desktop/wenyangyang/docs/iOS-Summary/Animation.md","mtime":1568205954000},{"path":"/Users/yangyangwen/Desktop/wenyangyang/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yangyangwen/Desktop/wenyangyang/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":499162500000},{"path":"/Users/yangyangwen/Desktop/wenyangyang/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yangyangwen/Desktop/wenyangyang/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yangyangwen/Desktop/wenyangyang/node_modules/vuepress/lib/webpack/markdownLoader.js","mtime":499162500000}],"contextDependencies":[],"result":["\n<div class=\"content\"><h1 id=\"动画\"><a class=\"header-anchor\" href=\"#动画\">#</a> 动画</h1>\n<h2 id=\"_1-uiview动画与核心动画的区别\"><a class=\"header-anchor\" href=\"#_1-uiview动画与核心动画的区别\">#</a> 1.UIView动画与核心动画的区别?</h2>\n<ul>\n<li>核心动画只作用在layer.</li>\n<li>核心动画修改的值都是假像.它的真实位置没有发生变化.</li>\n<li>当需要与用户进行交互时用UIView动画,不需要与用户进行交互时两个都可以.</li>\n</ul>\n<h2 id=\"_2-当我们要做一些基于-calayer-的动画时，有时需要设置-layer-的锚点来配合动画，这时候我们需要注意什么？\"><a class=\"header-anchor\" href=\"#_2-当我们要做一些基于-calayer-的动画时，有时需要设置-layer-的锚点来配合动画，这时候我们需要注意什么？\">#</a> 2.当我们要做一些基于 CALayer 的动画时，有时需要设置 layer 的锚点来配合动画，这时候我们需要注意什么？</h2>\n<ul>\n<li>\n<p>需要注意的是设置锚点会引起原来 position 的变化，可能会发生不符合预期的行为，所以要做一下转化，示例代码如下：</p>\n<!--beforebegin--><div class=\"language-c line-numbers-mode\"><!--afterbegin--><pre v-pre class=\"language-c\"><code><span class=\"token comment\">// 为 layer 的动画设置不同的 anchor point，但是又不想改变 view 原来的 position，则需要做一些转换。</span>\n<span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span>setAnchorPoint<span class=\"token operator\">:</span><span class=\"token punctuation\">(</span>CGPoint<span class=\"token punctuation\">)</span>anchorPoint forView<span class=\"token operator\">:</span><span class=\"token punctuation\">(</span>UIView <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span>view <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 分别计算原来锚点和将更新的锚点对应的坐标点，这些坐标点是相对该 view 内部坐标系的。</span>\n    CGPoint oldPoint <span class=\"token operator\">=</span> <span class=\"token function\">CGPointMake</span><span class=\"token punctuation\">(</span>view<span class=\"token punctuation\">.</span>bounds<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> view<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>anchorPoint<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span>\n                                   view<span class=\"token punctuation\">.</span>bounds<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">.</span>height <span class=\"token operator\">*</span> view<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>anchorPoint<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    CGPoint newPoint <span class=\"token operator\">=</span> <span class=\"token function\">CGPointMake</span><span class=\"token punctuation\">(</span>view<span class=\"token punctuation\">.</span>bounds<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> anchorPoint<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span>\n                                   view<span class=\"token punctuation\">.</span>bounds<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">.</span>height <span class=\"token operator\">*</span> anchorPoint<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// 如果当前 view 有做过 transform，这里要同步计算。</span>\n    oldPoint <span class=\"token operator\">=</span> <span class=\"token function\">CGPointApplyAffineTransform</span><span class=\"token punctuation\">(</span>oldPoint<span class=\"token punctuation\">,</span> view<span class=\"token punctuation\">.</span>transform<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    newPoint <span class=\"token operator\">=</span> <span class=\"token function\">CGPointApplyAffineTransform</span><span class=\"token punctuation\">(</span>newPoint<span class=\"token punctuation\">,</span> view<span class=\"token punctuation\">.</span>transform<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// position 是当前 view 的 anchor point 在其父 view 的位置。</span>\n    CGPoint position <span class=\"token operator\">=</span> view<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// anchor point 的改变会造成 position 的改变，从而影响 view 在其父 view 的位置，这里把这个位移给计算回来。</span>\n    position<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> position<span class=\"token punctuation\">.</span>x <span class=\"token operator\">+</span> newPoint<span class=\"token punctuation\">.</span>x <span class=\"token operator\">-</span> oldPoint<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">;</span>\n    position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">+</span> newPoint<span class=\"token punctuation\">.</span>y <span class=\"token operator\">-</span> oldPoint<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">;</span>\n    \n    view<span class=\"token punctuation\">.</span>translatesAutoresizingMaskIntoConstraints <span class=\"token operator\">=</span> YES<span class=\"token punctuation\">;</span>\n    view<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>anchorPoint <span class=\"token operator\">=</span> anchorPoint<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 设置了新的 anchor point 会改变位置。</span>\n    view<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>position <span class=\"token operator\">=</span> position<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 通过在 position 上做逆向偏移，把位置给移回来。</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<div class=\"line-numbers-wrapper\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br><span class=\"line-number\">12</span><br><span class=\"line-number\">13</span><br><span class=\"line-number\">14</span><br><span class=\"line-number\">15</span><br><span class=\"line-number\">16</span><br><span class=\"line-number\">17</span><br><span class=\"line-number\">18</span><br><span class=\"line-number\">19</span><br><span class=\"line-number\">20</span><br><span class=\"line-number\">21</span><br><span class=\"line-number\">22</span><br></div><!--beforeend--></div><!--afterend--></li>\n</ul>\n</div>\n",null]}