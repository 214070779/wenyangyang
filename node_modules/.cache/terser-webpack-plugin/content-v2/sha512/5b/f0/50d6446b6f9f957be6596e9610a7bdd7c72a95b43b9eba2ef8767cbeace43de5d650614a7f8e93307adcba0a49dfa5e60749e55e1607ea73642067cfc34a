{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{168:function(t,_,e){\"use strict\";e.r(_);var v=[function(){var t=this.$createElement,_=this._self._c||t;return _(\"h3\",{attrs:{id:\"从输入url到页面加载完成的过程\"}},[_(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#从输入url到页面加载完成的过程\"}},[this._v(\"#\")]),this._v(\" 从输入URL到页面加载完成的过程\")])},function(){var t=this.$createElement,_=this._self._c||t;return _(\"p\",[_(\"img\",{attrs:{src:e(!function(){var t=new Error(\"Cannot find module '../img/%E8%BE%93%E5%85%A5URL%E5%90%8E.png'\");throw t.code=\"MODULE_NOT_FOUND\",t}()),alt:\"输入URL后.png\"}})])},function(){var t=this,_=t.$createElement,e=t._self._c||_;return e(\"ul\",[e(\"li\",[t._v(\"判断是否需要跳转(301)\")]),t._v(\" \"),e(\"li\",[t._v(\"从浏览器中读取缓存\")]),t._v(\" \"),e(\"li\",[t._v(\"DNS解析\")]),t._v(\" \"),e(\"li\",[t._v(\"TCP连接\")]),t._v(\" \"),e(\"li\",[t._v(\"HTTP请求发出\")]),t._v(\" \"),e(\"li\",[t._v(\"服务端处理请求，HTTP响应返回\")]),t._v(\" \"),e(\"li\",[t._v(\"浏览器拿到响应数据，解析响应内内容，把解析结果展示给用户\")])])},function(){var t=this.$createElement,_=this._self._c||t;return _(\"li\",[this._v(\"判断是否有永久重定向(301)\\n\"),_(\"ol\",[_(\"li\",[this._v(\"如果有，直接跳转到对应URL\")])])])},function(){var t=this,_=t.$createElement,e=t._self._c||_;return e(\"li\",[t._v(\"浏览器查看资源是否有\"),e(\"strong\",[t._v(\"强缓存\")]),t._v(\"，有则直接使用，如果是\"),e(\"strong\",[t._v(\"协商缓存\")]),t._v(\"则需要到服务器进行校验资源是否可用\\n\"),e(\"ol\",[e(\"li\",[t._v(\"检验新鲜通常有两个HTTP头进行控制\"),e(\"code\",[t._v(\"Expires\")]),t._v(\"和\"),e(\"code\",[t._v(\"Cache-Control\")]),t._v(\"：\\n\"),e(\"ul\",[e(\"li\",[t._v(\"HTTP1.0提供Expires，值为一个绝对时间表示缓存新鲜日期\")]),t._v(\" \"),e(\"li\",[t._v(\"HTTP1.1增加了Cache-Control: max-age=,值为以秒为单位的最大新鲜时间\")])])])])])},function(){var t=this.$createElement,_=this._self._c||t;return _(\"li\",[this._v(\"浏览器\"),_(\"strong\",[this._v(\"解析URL\")]),this._v(\"获取协议，主机，端口，path\")])},function(){var t=this.$createElement,_=this._self._c||t;return _(\"li\",[this._v(\"浏览器\"),_(\"strong\",[this._v(\"组装一个HTTP（GET）请求报文\")])])},function(){var t=this,_=t.$createElement,e=t._self._c||_;return e(\"li\",[e(\"strong\",[t._v(\"DNS解析\")]),t._v(\"，查找过程如下：\\n\"),e(\"ol\",[e(\"li\",[t._v(\"浏览器缓存\")]),t._v(\" \"),e(\"li\",[t._v(\"本机缓存\")]),t._v(\" \"),e(\"li\",[t._v(\"hosts文件\")]),t._v(\" \"),e(\"li\",[t._v(\"路由器缓存\")]),t._v(\" \"),e(\"li\",[t._v(\"ISP DNS缓存\")]),t._v(\" \"),e(\"li\",[t._v(\"DNS查询（递归查询 / 迭代查询）\")])])])},function(){var t=this,_=t.$createElement,e=t._self._c||_;return e(\"li\",[e(\"strong\",[t._v(\"端口建立TCP链接\")]),t._v(\"，三次握手如下：\\n\"),e(\"ol\",[e(\"li\",[t._v(\"客户端发送一个TCP的\"),e(\"strong\",[t._v(\"SYN=1，Seq=X\")]),t._v(\"的包到服务器端口\")]),t._v(\" \"),e(\"li\",[t._v(\"服务器发回\"),e(\"strong\",[t._v(\"SYN=1， ACK=X+1， Seq=Y\")]),t._v(\"的响应包\")]),t._v(\" \"),e(\"li\",[t._v(\"客户端发送\"),e(\"strong\",[t._v(\"ACK=Y+1， Seq=Z\")])])])])},function(){var t=this.$createElement,_=this._self._c||t;return _(\"li\",[this._v(\"TCP链接建立后\"),_(\"strong\",[this._v(\"发送HTTP请求\")])])},function(){var t=this.$createElement,_=this._self._c||t;return _(\"li\",[this._v(\"服务器检查\"),_(\"strong\",[this._v(\"HTTP请求头是否包含缓存验证信息\")]),this._v(\"如果验证缓存新鲜，返回\"),_(\"strong\",[this._v(\"304\")]),this._v(\"等对应状态码\")])},function(){var t=this.$createElement,_=this._self._c||t;return _(\"li\",[this._v(\"服务器将\"),_(\"strong\",[this._v(\"响应报文通过TCP连接发送回浏览器\")])])},function(){var t=this,_=t.$createElement,e=t._self._c||_;return e(\"li\",[t._v(\"浏览器接收HTTP响应，然后根据情况选择\"),e(\"strong\",[t._v(\"关闭TCP连接或者保留重用，关闭TCP连接的四次挥手如下\")]),t._v(\"：\\n\"),e(\"ol\",[e(\"li\",[t._v(\"主动方发送\"),e(\"strong\",[t._v(\"Fin=1， Ack=Z， Seq= X\")]),t._v(\"报文\")]),t._v(\" \"),e(\"li\",[t._v(\"被动方发送\"),e(\"strong\",[t._v(\"ACK=X+1， Seq=Z\")]),t._v(\"报文\")]),t._v(\" \"),e(\"li\",[t._v(\"被动方发送\"),e(\"strong\",[t._v(\"Fin=1， ACK=X， Seq=Y\")]),t._v(\"报文\")]),t._v(\" \"),e(\"li\",[t._v(\"主动方发送\"),e(\"strong\",[t._v(\"ACK=Y， Seq=X\")]),t._v(\"报文\")])])])},function(){var t=this.$createElement,_=this._self._c||t;return _(\"li\",[this._v(\"如果资源可缓存，\"),_(\"strong\",[this._v(\"进行缓存\")])])},function(){var t=this.$createElement,_=this._self._c||t;return _(\"li\",[this._v(\"对响应进行\"),_(\"strong\",[this._v(\"解码\")]),this._v(\"（例如gzip压缩）\")])},function(){var t=this.$createElement,_=this._self._c||t;return _(\"li\",[_(\"strong\",[this._v(\"解析HTML文档，构件DOM树，下载资源，构造CSSOM树，执行js脚本\")]),this._v(\"，这些操作没有严格的先后顺序，以下分别解释\")])},function(){var t=this,_=t.$createElement,e=t._self._c||_;return e(\"li\",[e(\"strong\",[t._v(\"构建DOM树\")]),t._v(\"：\\n\"),e(\"ol\",[e(\"li\",[e(\"strong\",[t._v(\"Tokenizing\")]),t._v(\"：根据HTML规范将字符流解析为标记\")]),t._v(\" \"),e(\"li\",[e(\"strong\",[t._v(\"Lexing\")]),t._v(\"：词法分析将标记转换为对象并定义属性和规则\")]),t._v(\" \"),e(\"li\",[e(\"strong\",[t._v(\"DOM construction\")]),t._v(\"：根据HTML标记关系将对象组成DOM树\")])])])},function(){var t=this.$createElement,_=this._self._c||t;return _(\"li\",[this._v(\"解析过程中遇到图片、样式表、js文件，\"),_(\"strong\",[this._v(\"启动下载\")])])},function(){var t=this,_=t.$createElement,e=t._self._c||_;return e(\"li\",[t._v(\"构建\"),e(\"strong\",[t._v(\"CSSOM树\")]),t._v(\"：\\n\"),e(\"ol\",[e(\"li\",[e(\"strong\",[t._v(\"Tokenizing\")]),t._v(\"：字符流转换为标记流\")]),t._v(\" \"),e(\"li\",[e(\"strong\",[t._v(\"Node\")]),t._v(\"：根据标记创建节点\")]),t._v(\" \"),e(\"li\",[e(\"strong\",[t._v(\"CSSOM\")]),t._v(\"：节点创建CSSOM树\")])])])},function(){var t=this,_=t.$createElement,e=t._self._c||_;return e(\"ol\",[e(\"li\",[t._v(\"从DOM树的根节点遍历所有\"),e(\"strong\",[t._v(\"可见节点\")]),t._v(\"，不可见节点包括：1）\"),e(\"code\",[t._v(\"script\")]),t._v(\",\"),e(\"code\",[t._v(\"meta\")]),t._v(\"这样本身不可见的标签。2)被css隐藏的节点，如\"),e(\"code\",[t._v(\"display: none\")])]),t._v(\" \"),e(\"li\",[t._v(\"对每一个可见节点，找到恰当的CSSOM规则并应用\")]),t._v(\" \"),e(\"li\",[t._v(\"发布可视节点的内容和计算样式\")])])},function(){var t=this,_=t.$createElement,e=t._self._c||_;return e(\"li\",[e(\"strong\",[t._v(\"js解析如下\")]),t._v(\"：\\n\"),e(\"ol\",[e(\"li\",[t._v(\"浏览器创建Document对象并解析HTML，将解析到的元素和文本节点添加到文档中，此时\"),e(\"strong\",[t._v(\"document.readystate为loading\")])]),t._v(\" \"),e(\"li\",[t._v(\"HTML解析器遇到\"),e(\"strong\",[t._v(\"没有async和defer的script时\")]),t._v(\"，将他们添加到文档中，然后执行行内或外部脚本。这些脚本会同步执行，并且在脚本下载和执行时解析器会暂停。这样就可以用document.write()把文本插入到输入流中。\"),e(\"strong\",[t._v(\"同步脚本经常简单定义函数和注册事件处理程序，他们可以遍历和操作script和他们之前的文档内容\")])]),t._v(\" \"),e(\"li\",[t._v(\"当解析器遇到设置了\"),e(\"strong\",[t._v(\"async\")]),t._v(\"属性的script时，开始下载脚本并继续解析文档。脚本会在它\"),e(\"strong\",[t._v(\"下载完成后尽快执行\")]),t._v(\"，但是\"),e(\"strong\",[t._v(\"解析器不会停下来等它下载\")]),t._v(\"。异步脚本\"),e(\"strong\",[t._v(\"禁止使用document.write()\")]),t._v(\"，它们可以访问自己script和之前的文档元素\")]),t._v(\" \"),e(\"li\",[t._v(\"当文档完成解析，document.readState变成interactive\")]),t._v(\" \"),e(\"li\",[t._v(\"所有\"),e(\"strong\",[t._v(\"defer\")]),t._v(\"脚本会\"),e(\"strong\",[t._v(\"按照在文档出现的顺序执行\")]),t._v(\"，延迟脚本\"),e(\"strong\",[t._v(\"能访问完整文档树\")]),t._v(\"，禁止使用document.write()\")]),t._v(\" \"),e(\"li\",[t._v(\"浏览器\"),e(\"strong\",[t._v(\"在Document对象上触发DOMContentLoaded事件\")])]),t._v(\" \"),e(\"li\",[t._v(\"此时文档完全解析完成，浏览器可能还在等待如图片等内容加载，等这些\"),e(\"strong\",[t._v(\"内容完成载入并且所有异步脚本完成载入和执行\")]),t._v(\"，document.readState变为complete,window触发load事件\")])])])},function(){var t=this.$createElement,_=this._self._c||t;return _(\"li\",[_(\"strong\",[this._v(\"显示页面\")]),this._v(\"（HTML解析过程中会逐步显示页面）\")])}],n=e(0),r=Object(n.a)({},(function(){var t=this,_=t.$createElement,e=t._self._c||_;return e(\"div\",{staticClass:\"content\"},[t._m(0),t._v(\" \"),e(\"p\",[e(\"a\",{attrs:{href:\"https://segmentfault.com/a/1190000006879700\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"参考链接\"),e(\"OutboundLink\")],1)]),t._v(\" \"),t._m(1),t._v(\" \"),t._m(2),t._v(\" \"),e(\"ol\",[e(\"li\",[t._v(\"在浏览器地址栏输入URL\")]),t._v(\" \"),t._m(3),t._v(\" \"),t._m(4),t._v(\" \"),t._m(5),t._v(\" \"),t._m(6),t._v(\" \"),t._m(7),t._v(\" \"),t._m(8),t._v(\" \"),t._m(9),t._v(\" \"),e(\"li\",[t._v(\"服务器接受请求并解析，将请求转发到服务程序，如虚拟主机使用HTTP Host头部判断请求的服务程序\")]),t._v(\" \"),t._m(10),t._v(\" \"),e(\"li\",[t._v(\"处理程序读取完整请求并准备HTTP响应，可能需要查询数据库等操作\")]),t._v(\" \"),t._m(11),t._v(\" \"),t._m(12),t._v(\" \"),e(\"li\",[t._v(\"浏览器检查响应状态吗：是否为1XX，3XX， 4XX， 5XX，这些情况处理与2XX不同\")]),t._v(\" \"),t._m(13),t._v(\" \"),t._m(14),t._v(\" \"),e(\"li\",[t._v(\"根据资源类型决定如何处理（假设资源为HTML文档）\")]),t._v(\" \"),t._m(15),t._v(\" \"),t._m(16),t._v(\" \"),t._m(17),t._v(\" \"),t._m(18),t._v(\" \"),e(\"li\",[e(\"strong\",[e(\"a\",{attrs:{href:\"https://developers.google.com/web/fundamentals/performance/critical-rendering-path/render-tree-construction\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"根据DOM树和CSSOM树构建渲染树\"),e(\"OutboundLink\")],1)]),t._v(\":\\n\"),t._m(19)]),t._v(\" \"),t._m(20),t._v(\" \"),t._m(21)])])}),v,!1,null,null,null);_.default=r.exports}}]);","extractedComments":[]}